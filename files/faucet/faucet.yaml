---
version: 2

include:
    - acls-common.yaml
    - vlans-common.yaml

vlans:
    redcables-l3:
        name: "redcables-l3"
        description: "redcables ipv4/ipv6 vlan"
        vid: 250
        faucet_vips: [
            '163.7.137.254/24', '2404:138:4011:3e8::ffff/64',
            '210.7.38.91/29', '2404:138:39:120::f/112'
            ]
        bgp_port: 9179
        bgp_as: 38711
        bgp_routerid: '127.0.0.2'
        bgp_neighbor_addresses: ['127.0.0.1', '::1']
        bgp_neighbor_as: 38711
        routes:
            - route:
                ip_dst: '2404:138:4011::/64'
                ip_gw: '2404:138:39:120::3'
            - route:
                ip_dst: '163.7.136.0/25'
                ip_gw: '163.7.137.252'

dps:
    ovs-redcables:
        dp_id: 0x46
        hardware: "Open vSwitch"
        ignore_learn_ins: 10
        arp_neighbor_timeout: 600
        drop_spoofed_faucet_mac: False
        interfaces:
            1:
                native_vlan: redcables-l3
                name: 'vhost-nat64-redcables'
                description: "nat64 vm"
                acl_in: protect_from_access
            2:
                native_vlan: redcables-l3
                name: 'vhost-faucet-redcables'
                description: "faucet vm"
                acl_in: protect_from_core
            4:
                tagged_vlans: [redcables-l3,control]
                name: 'dpdk-at-x930-1'
                description: "at-x930-1 redcables trunk"
            5:
                tagged_vlans: [redcables-l3,control]
                name: 'dpdk-cisco-3850'
                description: "cisco-3850 redcables trunk"
            7:
                native_vlan: redcables-l3
                name: 'reannz'
                description: "reannz peering"
                acl_in: protect_from_edge
            8:
                native_vlan: redcables-l3
                name: 'unifi'
                description: "unifi controller vm"
                acl_in: protect_from_access
            9:
                native_vlan: redcables-l3
                name: 'monitoring'
                description: "monitoring vm"
                acl_in: protect_from_access
            10:
                native_vlan: redcables-l3
                name: 'awdy'
                description: "awdy vm"
                acl_in: protect_from_access
            20:
                native_vlan: control
                name: "vhost-faucet-cpn"
                description: "faucet vm control plane network"
                acl_in: protect_from_control
            21:
                native_vlan: control
                name: "dpdk-cpn"
                description: "redcables control plane network"
                acl_in: protect_from_control
            22:
                native_vlan: control
                name: "mon-cpn"
                description: "monitoring vm control plane network"
                acl_in: protect_from_control
            23:
                native_vlan: control
                name: "unifi"
                description: "unifi controller vm"
                acl_in: protect_from_control
    ovs-redcables6:
        dp_id: 0x6
        hardware: "Open vSwitch"
        ignore_learn_ins: 10
        arp_neighbor_timeout: 600
        drop_spoofed_faucet_mac: False
        interfaces:
            1:
                native_vlan: redcables6
                name: 'vhost-nat64-redcables6'
                description: "nat64 vm"
                acl_in: protect_from_core
            2:
                native_vlan: redcables6
                name: 'vhost-host-redcables6'
                description: "host-redcables6 vm"
                acl_in: protect_from_access
            6:
                tagged_vlans: [redcables6]
                name: 'dpdk6'
                description: "at-x930-1 redcables6 trunk"
            7:
                tagged_vlans: [redcables6]
                name: 'dpdk7'
                description: "at-x930-2 redcables6 trunk"
